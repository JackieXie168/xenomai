#
# Xenomai nucleus configuration for Linux v2.4
#

if [ "$CONFIG_XENOMAI" = "y" ]; then

dep_tristate 'Nucleus' CONFIG_XENO_OPT_NUCLEUS $CONFIG_XENOMAI

if [ "$CONFIG_XENO_OPT_NUCLEUS" != "n" ]; then
	mainmenu_option next_comment
	comment 'Nucleus options'
	bool 'Pervasive real-time support in user-space' CONFIG_XENO_OPT_PERVASIVE
	bool 'Message pipes' CONFIG_XENO_OPT_PIPE
	if [ "$CONFIG_XENO_OPT_PIPE" != "n" ]; then
		int 'Number of pipe devices' CONFIG_XENO_OPT_PIPE_NRDEV 32
	fi
	if [ "$CONFIG_XENO_OPT_PERVASIVE" != "n" ]; then
		define_bool CONFIG_XENO_OPT_REGISTRY y
	else
		bool 'Registry support' CONFIG_XENO_OPT_REGISTRY
	fi
	if [ "$CONFIG_XENO_OPT_REGISTRY" != "n" ]; then
		int 'Number of registry slots' CONFIG_XENO_OPT_REGISTRY_NRSLOTS 512
	fi
	int 'Size of the system heap (Kb)' CONFIG_XENO_OPT_SYS_HEAPSZ 128
	bool 'Interrupt shield support' CONFIG_XENO_OPT_ISHIELD
	bool 'Statistics collection' CONFIG_XENO_OPT_STATS
	bool 'Debug support' CONFIG_XENO_OPT_DEBUG
	if [ "$CONFIG_XENO_OPT_DEBUG" = "y" ]; then
		bool 'Queue Debugging support' CONFIG_XENO_OPT_DEBUG_QUEUES
	fi
	bool 'Watchdog support' CONFIG_XENO_OPT_WATCHDOG

	bool 'Enable periodic timer support' CONFIG_XENO_OPT_TIMING_PERIODIC
	if [ "$CONFIG_XENO_OPT_TIMING_PERIODIC" = "y" ]; then
	   int 'Timer period (ns)' CONFIG_XENO_OPT_TIMING_PERIOD 0
	else
	   define_int CONFIG_XENO_OPT_TIMING_PERIOD 0
	fi
	int 'Timer tuning latency (ns)' CONFIG_XENO_OPT_TIMING_TIMERLAT 0
	int 'Scheduling latency (ns)' CONFIG_XENO_OPT_TIMING_SCHEDLAT 0

	mainmenu_option next_comment
	comment 'Scalability options'
		bool 'O(1) scheduler' CONFIG_XENO_OPT_SCALABLE_SCHED
	if [ "$CONFIG_XENO_OPT_SCALABLE_SCHED" != "n" ]; then
		int 'Number of priority levels' CONFIG_XENO_OPT_SCALABLE_PRIOS 256
	fi
        choice 'Timer indexing method'			\
	"Linear			CONFIG_XENO_OPT_TIMER_LIST	\
	 Tree			CONFIG_XENO_OPT_TIMER_HEAP"	Linear
	if [ "$CONFIG_XENO_OPT_TIMER_HEAP" = "y" ]; then
		int 'Max. number of timers' CONFIG_XENO_OPT_TIMER_HEAP_CAPACITY 256
	fi
	endmenu

	mainmenu_option next_comment
	comment 'Shared interrupts'
		bool 'Level-triggered interrupts' CONFIG_XENO_OPT_SHIRQ_LEVEL
		bool 'Edge-triggered interrupts' CONFIG_XENO_OPT_SHIRQ_EDGE
	endmenu

	if [ "$CONFIG_LTT" != "n" ]; then
		mainmenu_option next_comment
		comment 'LTT tracepoints filtering'
			bool 'Disable IRQ-related tracepoints' CONFIG_XENO_OPT_FILTER_EVIRQ
			bool 'Disable thread-related tracepoints' CONFIG_XENO_OPT_FILTER_EVTHR
			bool 'Disable syscall-related tracepoints' CONFIG_XENO_OPT_FILTER_EVSYS
			bool 'Disable all tracepoints' CONFIG_XENO_OPT_FILTER_EVALL
		endmenu
	fi
	endmenu
fi

fi
